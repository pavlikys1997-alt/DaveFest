<!DOCTYPE html>
<html lang="ru">
<head>
<link rel="preload" as="image" href="/dave.webp">
<link rel="preload" as="image" href="/1.webp">
    
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dave Fest 2026 Generator</title>
    <!-- –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ Montserrat -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Montserrat', sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; padding: 20px; color: #fff; 
            background: #0e1111 url('1.webp') no-repeat center center fixed; 
            background-size: cover;
        }
        #quiz-container { 
            background: rgba(15, 15, 15, 0.95); padding: 30px; border-radius: 24px; 
            box-shadow: 0 15px 50px rgba(0,0,0,0.8); width: 100%; max-width: 450px; 
            text-align: center; border: 1px solid #28a745; backdrop-filter: blur(10px);
        }
        .hidden { display: none; }
        button { 
            background: #28a745; color: white; border: none; padding: 15px; 
            border-radius: 12px; cursor: pointer; margin-top: 15px; width: 100%; 
            font-size: 16px; font-weight: bold; transition: 0.3s;
        }
        button:hover { background: #218838; transform: scale(1.02); }
        input { 
            padding: 15px; width: 100%; box-sizing: border-box; margin-bottom: 15px; 
            border: 2px solid #333; border-radius: 12px; background: #000; color: #fff; font-size: 18px;
        }
        canvas { 
            max-width: 100%; height: auto; margin-top: 20px; 
            border-radius: 15px; border: 3px solid #28a745; background: #222;
        }
        h2 { color: #28a745; margin-bottom: 20px; }
    </style>
</head>
<body>

<div id="quiz-container">
    <div id="step-container">
        <h2 id="question-text">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
        <div id="answers"></div>
    </div>

    <div id="result-container" class="hidden">
        <h2>–¢–≤–æ—è –∫–∞—Ä—Ç–æ—á–∫–∞ Dave Fest</h2>
        <canvas id="resultCanvas" width="800" height="1100"></canvas>
        <button onclick="saveQuizImage()">üíæ –°–ö–ê–ß–ê–¢–¨ –ö–ê–†–¢–û–ß–ö–£</button>
    </div>
</div>

<script>
    // –£–ë–ï–î–ò–°–¨, –ß–¢–û –§–ê–ô–õ –ù–ê–ó–´–í–ê–ï–¢–°–Ø –ò–ú–ï–ù–ù–û –¢–ê–ö (–†–ï–ì–ò–°–¢–† –í–ê–ñ–ï–ù!)
    const TEMPLATE_IMG = 'dave.webp'; 

    const questions = [
        { q: "–¢–≤–æ–π –ù–∏–∫–Ω–µ–π–º?", type: "input" },
        { 
            q: "–û—Ü–µ–Ω–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ Dave Fest –æ—Ç 1 –¥–æ 5:", 
            type: "choice", 
            options: [" 1 - –û—á–µ–Ω—å –ø–ª–æ—Ö–æ", " 2 - –ü–ª–æ—Ö–æ", " 3 - –¢–µ—Ä–ø–∏–º–æ", " 4 - –•–æ—Ä–æ—à–æ", " 5 - –û—Ç–ª–∏—á–Ω–æ "], 
            required: " –û—Ç–ª–∏—á–Ω–æ " 
        },
        { q: "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–∏–Ω–∞—Ü–∏—é:", type: "choice", options: ["–ü–ª–∞–≤–∞–Ω—å–µ –ª—è–≥—É—à–∫–æ–π", "–•–æ—Ä–æ–≤–æ–µ –∫–≤–∞–∫–∞–Ω–∏–µ", "–î—Ä—É–≥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞", "–Ø –∫—É–ø–∏–ª –º–µ—Å—Ç–æ"] },
        { q: "–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è POWER?", type: "choice", options: ["Motivation", "–ü–ª–∞—Å—Ç–∏–∫–æ–≤—ã–π —Å—Ç—É–ª", "White Monster", "–í—Å—ë –≤–º–µ—Å—Ç–µ"] },
        { q: "–ü—Ä–∏–¥–µ—Ç–µ –µ—â–µ?", type: "choice", options: ["–î–∞!"] }
    ];

    let currentStep = 0;
    let userName = "";

    function showStep() {
        const container = document.getElementById('answers');
        const questionTitle = document.getElementById('question-text');
        container.innerHTML = "";
        let step = questions[currentStep];
        questionTitle.innerText = step.q;

        if (step.type === "input") {
            const input = document.createElement('input');
            input.id = "nameInput";
            input.placeholder = "–í–≤–µ–¥–∏—Ç–µ –∏–º—è...";
            const btn = document.createElement('button');
            btn.innerText = "–î–ê–õ–ï–ï ‚Üí";
            btn.onclick = () => {
                userName = document.getElementById('nameInput').value.trim() || "DAVE GUEST";
                nextStep();
            };
            container.appendChild(input);
            container.appendChild(btn);
        } else {
            step.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.innerText = opt;
                btn.onclick = () => {
                    if (step.required && opt !== step.required) {
                        alert("‚õî –û–®–ò–ë–ö–ê");
                    } else {
                        nextStep();
                    }
                };
                container.appendChild(btn);
            });
        }
    }

    function nextStep() {
        currentStep++;
        if (currentStep < questions.length) {
            showStep();
        } else {
            generateFinalCard();
        }
    }

    function generateFinalCard() {
        document.getElementById('step-container').classList.add('hidden');
        document.getElementById('result-container').classList.remove('hidden');

        const canvas = document.getElementById('resultCanvas');
        const ctx = canvas.getContext('2d');
        
        const img = new Image();
        // –í–∞–∂–Ω–æ: onload –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ü–ï–†–ï–î src
        img.onload = function() {
            // –†–∏—Å—É–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–∫—Å—Ç–∞
            const x = canvas.width / 2;
            const y = canvas.height * 0.85; 

            ctx.shadowColor = "rgba(0, 0, 0, 0.8)";
            ctx.shadowBlur = 10;
            ctx.fillStyle = '#ffffff'; 
            ctx.strokeStyle = '#28a745'; 
            ctx.lineWidth = 3;
            ctx.font = '800 60px Montserrat, sans-serif';
            ctx.textAlign = 'center';
            
            ctx.strokeText(userName.toUpperCase(), x, y);
            ctx.fillText(userName.toUpperCase(), x, y);
        };

        img.onerror = () => {
            alert("–§–∞–π–ª " + TEMPLATE_IMG + " –Ω–µ –Ω–∞–π–¥–µ–Ω!");
        };

        // –ó–∞–¥–∞–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle = "#000";
ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.fillStyle = "#28a745";
ctx.font = "24px Montserrat";
ctx.fillText("–ó–∞–≥—Ä—É–∑–∫–∞...", canvas.width/2, canvas.height/2);

        img.src = TEMPLATE_IMG;
    }

    function saveQuizImage() {
        const canvas = document.getElementById('resultCanvas');
        try {
            const link = document.createElement('a');
            link.download = `Card_${userName}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        } catch (e) {
            alert("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–π –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ Netlify –∏–ª–∏ Live Server.");
        }
    }

    showStep();
</script>
</body>
</html>



